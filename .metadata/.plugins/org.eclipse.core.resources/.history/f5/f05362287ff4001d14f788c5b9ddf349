<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="./css/cupertino/jquery-ui.css" />
<style type="text/css">
body {
	font-size: 80%;
}
</style>
<script type="text/javascript" src="./js/jquery-3.7.0.js"></script>
<script type="text/javascript" src="./js/jquery-ui.js"></script>
<script type="text/javascript">
	//버튼 이벤트
	$(document).ready(function() {
		$('#sido, #gugun, #dong').selectmenu({
			width: 150,
		});
		
		$.ajax({
			  url: './data/sido.jsp', // XML 값을 가져올 URL
			  dataType: 'xml',
			  success: function(data) {
			    var options = ''; // 선택지를 저장할 변수

			    // <sido> 요소들을 순회하면서 선택지를 생성
			    $(data).find('sido').each(function() {
			      var sido = $(this).text();
			      options += '<option value="' + sido + '">' + sido + '</option>';
			    });

			    // 생성된 선택지를 <select> 요소에 추가
			    $('#sido').append(options);
			  },
			  error: function() {
			    // 오류 처리
			    console.log('XML 가져오기 실패');
			  }
			});
		
		$('#sido').selectmenu().on('change', function() {
			  // gugun.jsp로 선택된 시도 데이터를 전달
			   $.ajax({
			    url: './data/gugun.jsp',
			    data: { sido: selectedSido }, // 선택된 시도 값을 전달
			    dataType: 'xml',
			    success: function(data) {
			      var options = ''; // 선택지를 저장할 변수

			      // <gugun> 요소들을 순회하면서 선택지를 생성
			      $(data).find('gugun').each(function() {
			        var gugun = $(this).text();
			        options += '<option value="' + gugun + '">' + gugun + '</option>';
			      });

			      // 생성된 선택지를 <select> 요소에 추가
			      $('#gugun').html('<option disabled="disabled" selected="selected">구군 선택</option>' + options);
			    },
			    error: function() {
			      // 오류 처리
			      console.log('XML 가져오기 실패');
			    }
			  }); 
			});
		
		$('#btn').button().on('click', function() {
			
		});
	});

</script>
</head>
<body>
	<fieldset>
	<legend>우편번호 검색</legend>
	<label for="sido">시도</label>
	<select id="sido">
		<option disabled="disabled" selected="selected">시도 선택</option>
	</select>
	<label for="gugun">구군</label>
	<select id="gugun">
		<option disabled="disabled" selected="selected">구군 선택</option>
	</select>
	<label for="dong">동</label>
	<select id="dong">
		<option disabled="disabled" selected="selected">동 선택</option>
	</select>
	<button id="btn">우편번호 검색</button>
</fieldset>

	<br>
	<hr>
	<br>
	<div id="result">
		<table border="1" width="800">
			<tr>
				<td>우편번호</td>
				<td>시도</td>
				<td>구군</td>
				<td>동</td>
				<td>리</td>
				<td>번지</td>
		</table>
	</div>
</body>
</html>